
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>My Events</title>
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="profilePage_events.css">
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap">
</head>
<style>
div#events-overview {
	background-color: #D9D9D9;
	margin-top: 70px;
	margin-left: 240px;
	/* Left margin accounts for the vertical navbar width */
	margin-bottom: 80px;
	margin-right: 60px; /* Right margin of 60px */
	border-radius: 5px;
	z-index: 0;
	width: calc(100% - 300px); /* Adjusting width based on margins */
	min-height: 800px;
	/* Ensures a minimum height if there are few or no events */
	padding-bottom: 20px; /* Padding at the bottom for aesthetic spacing */
	overflow: auto;
}

.event-element {
	margin-top: 10px; /* Ensure spacing between elements */
	background-color: #FFFFFF;
	padding: 20px; /* Adjust padding without overly enlarging the box */
	border: 1px solid #ddd;
	margin-right: 30px;
}

.flex-container {
	display: flex;
	width: 100%;
	/* Ensure the container uses full width to align child elements properly */
}

p#reg-events {
	padding: 30px;
	font-size: 30px;
	text-align: center;
	color: #555555;
	margin-bottom: 20px;
	/* Adds space below the Registered Events heading */
	margin-left: 30px;
	margin-right: 60px;
	margin-top: 10px;
}

.event-element {
	margin-top: 15px; /* Ensure spacing between elements */
	background-color: #FFFFFF;
	padding: 30px; /* Adjust padding without overly enlarging the box */
	border: 1px solid #ddd;
	border-radius: 5px; /* Rounded corners for the event elements */
}

.get-qrcode {
	background-color: #F9B17F;
	color: white;
	padding: 10px;
	border: none;
	border-radius: 4px;
	cursor: pointer;
	text-decoration: none; /* Ensures no underline */
	margin-top: 10px;
}

.get-qrcode a {
	color: white; /* Ensures the text color is white */
	text-decoration: none; /* Removes underline from the link */
	font-size: 15px;
}
</style>


<body>
	<div id="navbar">
		<div id="nav">
			<ul>
				<li id="right-items">
					<ul>
						<li><a id="userGreeting" href="profilePage.html">Welcome</a></li>
						<script>
						    document.getElementById('userGreeting').textContent = 'Welcome ' + localStorage.getItem('userName');
						</script>
					</ul>
				</li>
			</ul>
		</div>
		<!-- #nav -->
	</div>
	<div class="flex-container">
		<div id="vertical-navbar">
			<ul>
				<li><a href="profilePage.html">Home</a></li>
				<li><a href="search_page.html">Search</a></li>
				<li><a href="profilePage_events.html">My Events</a></li>
			</ul>
		</div>
		<div id="events-overview">
			<p id="reg-events">Registered Events</p>

		</div>

		<script>
	        document.addEventListener('DOMContentLoaded', function () {
	            // Get registered events from local storage
	            let registeredEvents = JSON.parse(localStorage.getItem("registeredEvents") || "[]");

	            // Reference the container div
	            let registeredEventsContainer = document.getElementById('reg-events');
	
	            // Loop through registered events and append HTML to display them
	            registeredEvents.forEach((event, index) => {
	            	console.log(event.event_name);
	            	console.log(event.registrationTime);
	                let eventId = index + 1;
	                let eventHtml = `
	                	<div class="event-element">
		                    <div class="event-info">
		                        <p class="event-id">Event ${eventId}</p>
		                        <p class="event-name">${event.event_name}</p>
		                        <p class="event-location">Location: ${event.event_location}</p>
		                        <p class="event-regTime">Registration Time: ${event.registrationTime}</p>
		                    </div>
		                    <div class="event-QRCode">
		                        <img class="qr-code-img" src="${event.QRCode}" alt="QR Code for Event ${eventId}">
		                    </div>
		                    <div class="event-button">
		                        <button class="get-qrcode"><a href="chatRoom.jsp">Get Event Chat Room</a></button>
		                    </div>
		                </div>
	                `;
	                registeredEventsContainer.insertAdjacentHTML('beforeend', eventHtml);
	            });
	        });
	    </script>
	</div>
</body>
</html>